<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
    <title><%= h(t('application.name')) %> - <%= h(yield(:title) || t('application.unnamed')) %></title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <%= stylesheet_link_tag 'application' %>
    <%= javascript_include_tag :defaults %>
    <%= yield(:head) %>
    <%= csrf_meta_tag %>
  </head>
  <body>
    <div id="container">
      <div id="header">
        <h1><%= link_to t('application.name'), root_url %></h1>
      </div>
      <div class="clear">
      <div id="nav">
        <ul>
          <li class="left<%= " active" if request.path.match("^/$") %>"><%= link_to t('application.home'), root_url %></li>
          <%- if logged_in? -%>
            <li class="left<%= mark_active_tab(:account) %>"><%= link_to t('application.accounts'), accounts_url %></li>
            <li class="left<%= mark_active_tab(:transaction) %>"><%= link_to t('application.transactions'), transactions_url %></li>
            <li class="left<%= mark_active_tab(:vendor) %>"><%= link_to t('application.vendors'), vendors_url %></li>
            <li class="left<%= mark_active_tab(:category) %>"><%= link_to t('application.categories'), categories_url %></li>
            <li class="left<%= mark_active_tab(:tag) %>"><%= link_to t('application.tags'), tags_url %></li>
            <li class="left<%= mark_active_tab(:budget) %>"><%= link_to t('application.budgets'), budgets_url %></li>
            <li class="left<%= " active" if request.path.match("^/stats") %>"><%= link_to t('application.stats'), root_url %></li>

            <li class="right"><%= link_to t('application.logout'), logout_path %></li>
            <li class="right<%= mark_active_tab(:user) %>"><%= link_to t('application.settings'), current_user %></li>
            <li class="right"><%= link_to t('application.dashboard'), dashboard_path %></li>
          <%- else -%>
            <li class="right"><%= link_to t('application.login'), login_path %></li>
            <li class="right<%= mark_active_tab(:user) %>"><%= link_to t('application.register'), new_user_path %></li>
          <%- end -%>
        </ul>
        <div style="clear: both;"></div>
      </div>
      
      <div id="content">
      <%- flash.each do |name, msg| -%>
        <%= content_tag :div, msg, :id => "flash_#{name}" %>
      <%- end -%>
      <%= yield %>
      </div>
      </div><!-- /clear -->
    </div>
  </body>
</html>

